{"version":3,"sources":["ng://alpha-global-header/src/util/menu-component.ts","ng://alpha-global-header/src/alpha-global-header.component.ts","ng://alpha-global-header/src/module.ts"],"names":["htmlClasses","document","documentElement","classList","AlphaHeader","element","options","_this","this","defaults","minItemSize","fontSize","reservedWidth","itemPadding","toolBarItemSelector","closeSubMenusOnClick","languages","isCollapsed","isMinified","state","menuContainer","querySelector","merge","obj","defaultProps","prop_1","hasOwnProperty","attachToolbarElements","length","appendChild","createLanguageMenu","attachSubMenuToggles","toolBar","insertBefore","firstChild","search","createSearchArea","requestAnimationFrame","check","add","_boundResizeFunction","bind","_boundClickFunction","onClick","_boundWindowClickFunction","onWindowClick","window","addEventListener","prototype","event","isMenuClick","closeSubMenus","contains","composedPath","filter","el","parentEl","parentElement","remove","spoofCloseSubMenu","target","menutarget","isOpen","parentNode","closeSearch","openSearch","open","id","close","style","height","ITEM_SIZE","pointerEvents","setTimeout","getCollapsedMenuWidth","minWidth","font","letterSpacing","minItemWidth","wordSpacing","excludeIcons","i","children","needed","liEl","text","firstElementChild","textContent","measureWidth","createElement","searchIcon","createSearchIcon","menuToggle","innerHTML","closeButton","items","querySelectorAll","len","item","extraClass","languageElement","setAttribute","subMenu","language","href","attr","code","label","getAttribute","url","URL","location","searchParams","delete","append","searchArea","searchAction","action","formTarget","origin","hostname","subMenus","toggle","overwrites","addSpacing","addWordAndLetterSpacing","ws","ls","wordAddon","pxValue","letterAddon","words","trim","replace","split","chars","getContext2d","measureText","width","canvasContext","ctx","getContext","dpr","devicePixelRatio","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","setTransform","err","Error","openElements","destroy","removeEventListener","newState","availWidth","body","clientWidth","collapsedWidthNeeded","ITEM_MIN_PADDING","setExtraItemPadding","childrenToPad","childElementCount","hasAttribute","push","extraItemPadding","link","paddingLeft","paddingRight","val","baseFontSize","parseInt","prop","src","defaultValue","value","parseFloat","unit","AlphaGlobalHeader","elRef","router","homeTarget","events","subscribe","header","NavigationStart","ngAfterViewInit","nativeElement","onHomeClick","home","Array","preventDefault","navigate","ngOnDestroy","Component","args","selector","template","encapsulation","ViewEncapsulation","None","ElementRef","Router","Input","HostListener","AlphaGlobalHeaderModule","NgModule","declarations","exports","imports","CommonModule"],"mappings":"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","sourcesContent":["\r\n// reference to document element classes\r\nconst htmlClasses = document.documentElement.classList;\r\n\r\n\r\nconst ITEM_SIZE = 84;\r\nconst ITEM_MAX_PADDING = 50;\r\nconst ITEM_MIN_PADDING = 15;\r\nconst ITEM_FONT_SIZE = 18;\r\nconst MENU_RESERVED_WIDTH = 84; // the logo is only required space\r\n\r\n/**\r\n * This class is used in polymer and angular to construct and manage the menu\r\n */\r\nclass AlphaHeader {\r\n\r\n\tpublic toolBar: HTMLElement;\r\n\tpublic menuContainer: HTMLElement;\r\n\tpublic searchArea: HTMLElement;\r\n\r\n\tpublic isCollapsed: boolean;\r\n\tpublic isMinified: boolean;\r\n\tpublic state: string;\r\n\tpublic options: any;\r\n\tpublic defaults: any = {\r\n\t\tminItemSize: 10,\r\n\t\tfontSize: \"10px\",\r\n\t\treservedWidth: 50,\r\n\t\titemPadding: 10, // * x 2,\r\n\t\ttoolBarItemSelector: '[toolbar-item]',\r\n\t\tcloseSubMenusOnClick: false,\r\n\t\tlanguages: []\r\n\r\n\t};\r\n\r\n\tprivate canvasContext: CanvasRenderingContext2D;\r\n\r\n\tprivate _boundResizeFunction: EventListenerOrEventListenerObject;\r\n\tprivate _boundClickFunction: EventListenerOrEventListenerObject;\r\n\tprivate _boundWindowClickFunction: EventListenerOrEventListenerObject;\r\n\r\n\tconstructor(\r\n\t\tpublic element,\r\n\t\toptions\r\n\t) {\r\n\r\n\t\tthis.isCollapsed = false;\r\n\t\tthis.isMinified = false;\r\n\t\tthis.state = '';\r\n\t\tthis.menuContainer = this.element.querySelector( '[menu-container]' );\r\n\r\n\t\tthis.options = merge( options || {}, this.defaults );\r\n\r\n\t\tthis.attachToolbarElements();\r\n\r\n\t\tif ( this.options.languages.length ) {\r\n\t\t\tthis.menuContainer.appendChild( this.createLanguageMenu( 'no-cursor' ) );\r\n\t\t}\r\n\r\n\t\t// create sub menu toggles\r\n\t\tthis.attachSubMenuToggles();\r\n\r\n\t\t// create toolbar menu after sub-menu toggle\r\n\t\tif ( this.options.languages.length ) {\r\n\t\t\tthis.toolBar.insertBefore( this.createLanguageMenu( 'sub-menu-toggle' ), this.toolBar.firstChild );\r\n\t\t}\r\n\r\n\t\tif ( this.options.search ) {\r\n\t\t\tthis.createSearchArea();\r\n\t\t}\r\n\r\n\t\trequestAnimationFrame( () => {\r\n\t\t\tthis.check();\r\n\t\t\tthis.element.classList.add( 'ready' );\r\n\t\t} );\r\n\r\n\t\tthis._boundResizeFunction = this.check.bind( this );\r\n\t\tthis._boundClickFunction = this.onClick.bind( this );\r\n\t\tthis._boundWindowClickFunction = this.onWindowClick.bind( this );\r\n\r\n\t\twindow.addEventListener( 'resize', this._boundResizeFunction );\r\n\r\n\t\tthis.element.addEventListener( 'click', this._boundClickFunction );\r\n\r\n\t\twindow.addEventListener( 'click', this._boundWindowClickFunction );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Listen to clicks on the window to close open nav menus\r\n\t */\r\n\tprivate onWindowClick( event ): void {\r\n\r\n\t\t// if the click came from the menu, dont do anything\r\n\t\tif ( event.isMenuClick ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.closeSubMenus();\r\n\t}\r\n\r\n\t/**\r\n\t * Handle clicks on different elements\r\n\t */\r\n\tprivate onClick( event ): void {\r\n\r\n\t\tevent.isMenuClick = true;\r\n\r\n\r\n\t\tif ( this.options.closeSubMenusOnClick && !document.documentElement.classList.contains( 'nav-open' ) ) {\r\n\t\t\t// close sub-menus if the click came from there\r\n\t\t\tlet menuContainer = event.composedPath().filter( function ( el ) { return el.classList && el.classList.contains( 'sub-menu' ); } )\r\n\t\t\tif ( menuContainer.length ) {\r\n\t\t\t\tconst parentEl: HTMLElement = menuContainer[ 0 ].parentElement;\r\n\t\t\t\tif ( parentEl.classList.contains( 'open' ) ) {\r\n\t\t\t\t\tparentEl.classList.remove( 'open' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.spoofCloseSubMenu( parentEl );\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * Sub menu toggle clicks\r\n\t\t */\r\n\t\tif ( event.target.classList.contains( 'sub-menu-toggle' ) ) {\r\n\r\n\t\t\tlet menutarget;\r\n\t\t\tif ( event.target.classList.contains( 'menu-item-has-children' ) ) {\r\n\r\n\t\t\t\tmenutarget = event.target;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tmenutarget = event.target.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tlet isOpen: boolean = menutarget.classList.contains( 'open' );\r\n\r\n\t\t\tthis.closeSubMenus();\r\n\r\n\t\t\tif ( isOpen ) {\r\n\t\t\t\tmenutarget.classList.remove( 'open' );\r\n\t\t\t} else {\r\n\t\t\t\tmenutarget.classList.add( 'open' );\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t} else if ( event.target.classList.contains( 'search-form-close' ) ) {\r\n\r\n\t\t\tthis.closeSearch();\r\n\r\n\t\t} else if ( event.target.classList.contains( 'search-icon' ) ) {\r\n\r\n\t\t\tthis.openSearch();\r\n\r\n\t\t} else if ( event.target.classList.contains( 'menu-toggle' ) ) {\r\n\r\n\t\t\tthis.open();\r\n\r\n\t\t} else if ( event.target.id === 'closeButton' ) {\r\n\r\n\t\t\tthis.close();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * In angular situations, the page doesn't navigate, so a hovered sub-menu will remain open after a click\r\n\t * This will\r\n\t */\r\n\tprivate spoofCloseSubMenu( element ) {\r\n\t\telement.style.height = ITEM_SIZE + 'px';\r\n\t\telement.style.pointerEvents = 'none';\r\n\t\tsetTimeout( function () {\r\n\r\n\t\t\telement.style.height = '';\r\n\t\t\telement.style.pointerEvents = '';\r\n\r\n\r\n\t\t}, 100 )\r\n\t}\r\n\r\n\t/**\r\n\t * Go through each direct children of the ul menu container, measure the required text for each element plus some padding\r\n\t */\r\n\tprivate getCollapsedMenuWidth( options ): number {\r\n\r\n\t\tvar minWidth = 0,\r\n\t\t\toptions = options || {},\r\n\t\t\tfont = options.font || \"10px Arial\",\r\n\t\t\tletterSpacing = options.letterSpacing || 0,\r\n\t\t\titemPadding = options.itemPadding || 0,\r\n\t\t\tminItemWidth = options.minItemWidth || 0,\r\n\t\t\twordSpacing = options.wordSpacing || 0,\r\n\t\t\texcludeIcons = options.excludeIcons || false,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( i; i < this.menuContainer.children.length; i++ ) {\r\n\r\n\t\t\tvar liEl = this.menuContainer.children[ i ];\r\n\r\n\t\t\tvar link = liEl.firstElementChild || liEl,\r\n\t\t\t\ttext = link.textContent,\r\n\t\t\t\tneeded;\r\n\r\n\t\t\tif ( text ) {\r\n\t\t\t\tneeded = this.measureWidth( text, font, { letterSpacing: letterSpacing, wordSpacing: wordSpacing } ) + itemPadding;\r\n\t\t\t} else if ( !excludeIcons ) {\r\n\t\t\t\tneeded = minItemWidth;\r\n\t\t\t} else {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//console.info(link.textContent, needed);\r\n\r\n\t\t\t// ensure min item width\r\n\t\t\tminWidth += needed < minItemWidth ? minItemWidth : needed;\r\n\r\n\t\t};\r\n\r\n\t\treturn minWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Move toolbar elements into the toolbar from the menu\r\n\t *\r\n\t */\r\n\tprivate attachToolbarElements(): void {\r\n\r\n\t\t// create the toolbar container\r\n\t\tthis.toolBar = document.createElement( 'div' );\r\n\t\tthis.toolBar.classList.add( 'menu-toolbar' );\r\n\r\n\t\t// add a search icon\r\n\t\tif ( this.options.search ) {\r\n\t\t\tconst searchIcon: HTMLElement = this.createSearchIcon();\r\n\t\t\tthis.toolBar.appendChild( searchIcon );\r\n\t\t}\r\n\r\n\t\t// add the menu icon\r\n\t\tconst menuToggle: HTMLElement = document.createElement( 'a' );\r\n\t\tmenuToggle.classList.add( 'menu-toggle' );\r\n\t\tmenuToggle.innerHTML = '<i></i>';\r\n\t\tthis.toolBar.appendChild( menuToggle );\r\n\r\n\t\t// add the close button\r\n\t\tconst closeButton: HTMLElement = document.createElement( 'span' );\r\n\t\tcloseButton.id = 'closeButton';\r\n\t\tcloseButton.classList.add( 'agh-icon-close-thin' );\r\n\t\tthis.element.appendChild( closeButton );\r\n\r\n\t\t// append the toolbar\r\n\t\tthis.element.appendChild( this.toolBar );\r\n\r\n\t\t// find dynamic toolbar items from the user markup\r\n\t\tconst items: NodeList = this.menuContainer.querySelectorAll( this.options.toolBarItemSelector );\r\n\r\n\t\tlet i: number = 0,\r\n\t\t\tlen: number = items.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tconst item: Node = items[ i ];\r\n\t\t\tthis.toolBar.insertBefore( item, this.toolBar.firstChild );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Create the language menu\r\n\t */\r\n\tprivate createLanguageMenu( extraClass: string = '' ): HTMLElement {\r\n\r\n\t\tif ( this.options.languages.length === 0 ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst languageElement: HTMLElement = document.createElement( 'div' );\r\n\t\tlanguageElement.classList.add( 'menu-item-has-children' );\r\n\t\tlanguageElement.setAttribute( 'menu-icon', 'w' );\r\n\t\tlanguageElement.setAttribute( 'menu-title', 'Languages' );\r\n\r\n\t\tif ( extraClass ) {\r\n\t\t\tlanguageElement.classList.add( extraClass );\r\n\t\t}\r\n\r\n\t\tlet subMenu: string = '<ul class=\"sub-menu\">',\r\n\t\t\ti: number = 0,\r\n\t\t\tlen: number = this.options.languages.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tconst language = this.options.languages[ i ];\r\n\t\t\tlet href: string = 'javascript:void(0)';\r\n\t\t\tlet attr: string = '';\r\n\t\t\tif ( language.code ) {\r\n\t\t\t\tattr = 'data-lang=\"' + language.code + '\"';\r\n\r\n\t\t\t} else if ( language.href ) {\r\n\t\t\t\thref = language.href;\r\n\t\t\t}\r\n\r\n\t\t\tsubMenu += '<li><a ' + attr + ' href=\"' + href + '\">' + language.label + '</a></li>';\r\n\t\t}\r\n\r\n\t\tsubMenu += '</ul>';\r\n\r\n\t\tlanguageElement.innerHTML = subMenu;\r\n\r\n\t\tlanguageElement.addEventListener( 'click', ( event: MouseEvent ) => {\r\n\r\n\t\t\tlet code = null;\r\n\t\t\tif ( null !== ( code = ( event.target as HTMLElement ).getAttribute( 'data-lang' ) ) ) {\r\n\t\t\t\tlet url: URL = new URL( document.location.href );\r\n\t\t\t\turl.searchParams.delete( 'lang' );\r\n\t\t\t\turl.searchParams.append( 'lang', code );\r\n\t\t\t\tdocument.location.href = url.href;\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn languageElement;\r\n\t}\r\n\r\n\t/**\r\n\t * Create an icon to open the search\r\n\t */\r\n\tprivate createSearchIcon(): HTMLElement {\r\n\t\tconst searchIcon: HTMLElement = document.createElement( 'div' );\r\n\t\tsearchIcon.classList.add( 'search-icon' );\r\n\t\tsearchIcon.setAttribute( 'menu-icon', 'g' );\r\n\t\treturn searchIcon;\r\n\t}\r\n\r\n\t/**\r\n\t * Create the search area\r\n\t */\r\n\tprivate createSearchArea(): void {\r\n\r\n\t\t// create the search form\r\n\t\tthis.searchArea = document.createElement( 'div' );\r\n\t\tthis.searchArea.classList.add( 'menu-search-area' );\r\n\r\n\t\t// form action\r\n\t\tconst searchAction: string = this.options.search.action || \"\";\r\n\r\n\t\t// create a URL from the search action\r\n\t\tconst searchUrl: URL = new URL( searchAction, document.location.origin );\r\n\r\n\t\t// get the form target\r\n\t\tconst formTarget: string = searchUrl.hostname !== document.location.hostname ? '_blank' : '_self';\r\n\r\n\t\t// the form markup\r\n\t\tthis.searchArea.innerHTML =\r\n\t\t\t`<form target=\"${ formTarget }\" class=\"menu-search\" action=\"${ searchAction }\">\r\n\t\t\t\t<div class=\"menu-search-input-wrapper\">\r\n\t\t\t\t\t<input class=\"menu-search-input\" type=\"text\" name=\"s\" value=\"\" placeholder=\"Search\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"search-form-close agh-icon-close-thin\"></div>\r\n\t\t\t</form>`;\r\n\r\n\t\t// create the toggle\r\n\t\tconst searchIcon: HTMLElement = this.createSearchIcon();\r\n\r\n\t\t// attach them\r\n\t\tthis.menuContainer.appendChild( searchIcon );\r\n\t\tthis.menuContainer.parentElement.appendChild( this.searchArea );\r\n\t}\r\n\r\n\t/**\r\n\t * Attach sub menu toggles\r\n\t */\r\n\tprivate attachSubMenuToggles(): void {\r\n\r\n\t\tconst subMenus = this.element.querySelectorAll( '.sub-menu' );\r\n\r\n\t\tlet i: number = 0,\r\n\t\t\tlen: number = subMenus.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\r\n\t\t\tlet subMenu = subMenus[ i ];\r\n\r\n\t\t\tconst toggle: HTMLElement = document.createElement( 'span' );\r\n\t\t\ttoggle.classList.add( 'sub-menu-toggle' );\r\n\r\n\t\t\tsubMenu.parentNode.insertBefore( toggle, subMenu );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Measure the width of text given a font def and custom properties\r\n\t */\r\n\tprivate measureWidth( text, font, overwrites: any = {} ): number {\r\n\r\n\t\tvar letterSpacing = overwrites.letterSpacing || 0;\r\n\t\tvar wordSpacing = overwrites.wordSpacing || 0;\r\n\t\tvar addSpacing = addWordAndLetterSpacing( wordSpacing, letterSpacing );\r\n\r\n\t\tvar ctx = this.getContext2d( font );\r\n\r\n\t\treturn ctx.measureText( text ).width + addSpacing( text );\r\n\t}\r\n\r\n\t/**\r\n\t * Get canvas element to measure text with\r\n\t */\r\n\tprivate getContext2d( font ): CanvasRenderingContext2D {\r\n\r\n\t\tif ( this.canvasContext ) {\r\n\t\t\treturn this.canvasContext;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tvar ctx: any = document.createElement( 'canvas' ).getContext( '2d' );\r\n\t\t\tvar dpr = window.devicePixelRatio || 1;\r\n\t\t\tvar bsr = ctx.webkitBackingStorePixelRatio ||\r\n\t\t\t\tctx.mozBackingStorePixelRatio ||\r\n\t\t\t\tctx.msBackingStorePixelRatio ||\r\n\t\t\t\tctx.oBackingStorePixelRatio ||\r\n\t\t\t\tctx.backingStorePixelRatio || 1;\r\n\t\t\tctx.font = font;\r\n\t\t\tctx.setTransform( dpr / bsr, 0, 0, dpr / bsr, 0, 0 );\r\n\r\n\t\t\tthis.canvasContext = ctx;\r\n\r\n\t\t\treturn ctx;\r\n\t\t} catch ( err ) {\r\n\t\t\tthrow new Error( 'Canvas support required' );\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic open(): void {\r\n\t\tthis.closeSubMenus();\r\n\t\tthis.element.classList.add( 'open' );\r\n\t\thtmlClasses.add( 'nav-open' );\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.element.classList.remove( 'open' );\r\n\t\thtmlClasses.remove( 'nav-open' );\r\n\t}\r\n\r\n\tpublic closeSubMenus(): void {\r\n\t\tlet openElements = this.element.querySelectorAll( '.open' );\r\n\t\tvar i = 0, len = openElements.length;\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tvar item = openElements[ i ];\r\n\t\t\titem.classList.remove( 'open' );\r\n\t\t}\r\n\t}\r\n\r\n\tpublic openSearch(): void {\r\n\t\tthis.closeSubMenus();\r\n\t\tthis.searchArea.classList.add( 'open' );\r\n\t}\r\n\r\n\tpublic closeSearch(): void {\r\n\r\n\t\tthis.searchArea.classList.remove( 'open' );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Remove listeners\r\n\t */\r\n\tpublic destroy(): void {\r\n\r\n\t\twindow.removeEventListener( 'resize', this._boundResizeFunction );\r\n\r\n\t\tthis.element.removeEventListener( 'click', this._boundClickFunction );\r\n\t}\r\n\r\n\t/**\r\n\t * Resize function\r\n\t */\r\n\tpublic check(): void {\r\n\r\n\t\t// extract the supported values\r\n\t\tvar reservedWidth = MENU_RESERVED_WIDTH,\r\n\t\t\tminItemSize = ITEM_SIZE,\r\n\t\t\ttoolBarIconWidth = ITEM_SIZE,\r\n\t\t\tfontSize = ITEM_FONT_SIZE + \"px\"\r\n\r\n\t\t// available width the menu has to expand to\r\n\t\tvar availWidth = document.body.clientWidth - reservedWidth;\r\n\r\n\r\n\t\t// width needed by the menu\r\n\t\tvar collapsedWidthNeeded = this.getCollapsedMenuWidth( {\r\n\t\t\tfont: \"600 \" + fontSize + \" Century Gothic\",\r\n\t\t\tletterSpacing: \"0.05em\",\r\n\t\t\titemPadding: ITEM_MIN_PADDING * 2,\r\n\t\t\tminItemWidth: minItemSize\r\n\t\t} );\r\n\r\n\t\t// width needed for toolbar icon view\r\n\t\tvar minWidthNeeded = this.toolBar.children.length * toolBarIconWidth;\r\n\r\n\t\t// new state to change into\r\n\t\tvar newState;\r\n\r\n\t\t/*console.info(\r\n\t\t\t\"available width: \" + availWidth + \"\\n\"\r\n\t\t\t+ \"need for collapsed: \" + collapsedWidthNeeded + \"\\n\"\r\n\t\t\t+ \"need for toolbar: \" + minWidthNeeded\r\n\t\t);*/\r\n\r\n\t\t/**\r\n\t\t * Check conditions for collapsing\r\n\t\t */\r\n\r\n\t\tif ( availWidth < minWidthNeeded ) {\r\n\r\n\t\t\tnewState = 'minified';\r\n\r\n\t\t} else if ( availWidth < collapsedWidthNeeded ) {\r\n\r\n\t\t\tnewState = 'collapsed';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewState = '';\r\n\t\t\t// set any extra item padding available\r\n\t\t\tthis.setExtraItemPadding();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.state !== newState ) {\r\n\r\n\t\t\tif ( newState === 'minified' || newState === 'collapsed' ) {\r\n\r\n\t\t\t\thtmlClasses.add( 'nav-collapsed' );\r\n\t\t\t\tthis.element.classList.add( 'collapsed' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( newState === '' ) {\r\n\r\n\t\t\t\thtmlClasses.remove( 'nav-minified' );\r\n\t\t\t\thtmlClasses.remove( 'nav-collapsed' );\r\n\t\t\t\tthis.element.classList.remove( 'minified' );\r\n\t\t\t\tthis.element.classList.remove( 'collapsed' );\r\n\r\n\t\t\t} else if ( newState === 'minified' ) {\r\n\r\n\t\t\t\thtmlClasses.add( 'nav-minified' );\r\n\t\t\t\tthis.element.classList.add( 'minified' );\r\n\r\n\t\t\t} else if ( newState === 'collapsed' && this.state === 'minified' ) {\r\n\r\n\t\t\t\tthis.element.classList.remove( 'minified' );\r\n\t\t\t\thtmlClasses.remove( 'nav-minified' );\r\n\r\n\t\t\t} else if ( this.state === 'collapsed' ) {\r\n\r\n\t\t\t\tthis.element.classList.remove( 'collapsed' );\r\n\t\t\t\thtmlClasses.remove( 'nav-collapsed' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.state = newState;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set extra item padding\r\n\t */\r\n\tprivate setExtraItemPadding(): void {\r\n\r\n\t\t// available width the menu has to expand to\r\n\t\tvar availWidth = document.body.clientWidth - MENU_RESERVED_WIDTH;\r\n\r\n\t\tlet childrenToPad: Array<HTMLElement> = [];\r\n\t\tlet i: number = 0;\r\n\t\tfor ( i; i < this.menuContainer.childElementCount; i++ ) {\r\n\t\t\tlet el: HTMLElement = this.menuContainer.children[ i ] as HTMLElement;\r\n\t\t\tif ( !el.hasAttribute( 'menu-icon' ) && !el.classList.contains( 'menu-icon-width' ) ) {\r\n\t\t\t\tchildrenToPad.push( el );\r\n\t\t\t} else {\r\n\t\t\t\tavailWidth -= ITEM_SIZE;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// min width with no padding, excluding icons\r\n\t\tlet minWidthNeeded: number = this.getCollapsedMenuWidth( {\r\n\t\t\tfont: \"600 \" + ITEM_FONT_SIZE + \"px\" + \" Century Gothic\",\r\n\t\t\tletterSpacing: \"0.05em\",\r\n\t\t\titemPadding: 0,\r\n\t\t\tminItemWidth: 0,\r\n\t\t\texcludeIcons: true\r\n\t\t} );\r\n\r\n\r\n\t\t// space available to distribute to padding\r\n\t\tlet paddingToDistribute: number = availWidth - minWidthNeeded;\r\n\r\n\t\t// item padding\r\n\t\tlet extraItemPadding: number = paddingToDistribute / ( childrenToPad.length * 2 );\r\n\r\n\t\t// ensure max/min\r\n\t\tif ( extraItemPadding > ITEM_MAX_PADDING ) {\r\n\t\t\textraItemPadding = ITEM_MAX_PADDING;\r\n\t\t} else if ( extraItemPadding < ITEM_MIN_PADDING ) {\r\n\t\t\textraItemPadding = ITEM_MIN_PADDING;\r\n\t\t}\r\n\r\n\t\t/*console.info(\r\n\t\t\t\"minWidthNeeded: \" + minWidthNeeded + \"\\n\"\r\n\t\t\t+ \"availWidth: \" + availWidth + \"\\n\"\r\n\t\t\t+ \"will distribute: \" + paddingToDistribute + \"\\n\"\r\n\t\t\t+ \"to \" + childrenToPad.length + \" each: \" + extraItemPadding + \"\\n\"\r\n\t\t);*/\r\n\r\n\t\t/**\r\n\t\t * Set padding on the menu elements\r\n\t\t */\r\n\t\tfor ( i = 0; i < childrenToPad.length; i++ ) {\r\n\t\t\tlet el: HTMLElement = childrenToPad[ i ] as HTMLElement;\r\n\t\t\tif ( !el.firstElementChild ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet link: HTMLElement = el.firstElementChild as HTMLElement;\r\n\t\t\tlink.style.paddingLeft = extraItemPadding + \"px\";\r\n\t\t\tlink.style.paddingRight = extraItemPadding + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n *\r\n * \tHelper functions\r\n *\r\n */\r\n\r\n\r\n/**\r\n *\r\n */\r\nfunction merge( obj, defaultProps ) {\r\n\tfor ( let prop in defaultProps ) {\r\n\t\tif ( !obj.hasOwnProperty( prop ) ) {\r\n\t\t\tobj[ prop ] = defaultProps[ prop ];\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n}\r\n\r\n\r\n/**\r\n * Get property from src\r\n*/\r\nfunction prop( src, attr, defaultValue ) {\r\n\treturn ( src && typeof src[ attr ] !== 'undefined' && src[ attr ] ) || defaultValue;\r\n}\r\n\r\n\r\n/**\r\n * We only support rem/em/pt conversion\r\n */\r\nfunction pxValue( val, options = {} ) {\r\n\tvar baseFontSize = parseInt( prop( options, 'base-font-size', 16 ), 10 );\r\n\r\n\tvar value = parseFloat( val );\r\n\tvar unit = val.replace( value, '' );\r\n\t// eslint-disable-next-line default-case\r\n\tswitch ( unit ) {\r\n\t\tcase 'rem':\r\n\t\tcase 'em':\r\n\t\t\treturn value * baseFontSize;\r\n\t\tcase 'pt':\r\n\t\t\treturn value / ( 96 / 72 );\r\n\t\tcase 'px':\r\n\t\t\treturn value;\r\n\t}\r\n\r\n\tthrow new Error( `The unit ${ unit } is not supported` );\r\n}\r\n\r\n\r\n/**\r\n * Add custom letter and word spacing\r\n */\r\nfunction addWordAndLetterSpacing( ws, ls ) {\r\n\r\n\tlet wordAddon = 0;\r\n\tif ( ws ) {\r\n\t\twordAddon = pxValue( ws );\r\n\t}\r\n\r\n\tlet letterAddon = 0;\r\n\tif ( ls ) {\r\n\t\tletterAddon = pxValue( ls );\r\n\t}\r\n\r\n\treturn function ( text ) {\r\n\t\tvar words = text.trim().replace( /\\s+/gi, ' ' ).split( ' ' ).length - 1;\r\n\t\tvar chars = text.length;\r\n\r\n\t\treturn ( words * wordAddon ) + ( chars * letterAddon );\r\n\t};\r\n}\r\n\r\nexport {\r\n\tAlphaHeader\r\n}\r\n","import {\r\n\tComponent,\r\n\tInput,\r\n\tViewEncapsulation,\r\n\tAfterViewInit,\r\n\tOnDestroy,\r\n\tElementRef,\r\n\tHostListener\r\n\r\n} from '@angular/core';\r\n\r\nimport {\r\n\tRouter,\r\n\tNavigationStart\r\n} from '@angular/router';\r\n\r\nimport { AlphaHeader } from './util/menu-component';\r\n\r\n\r\n@Component( {\r\n\tselector: 'alpha-global-header',\r\n\ttemplate: `\r\n\t<a *ngIf=\"home\" class=\"question-mark agh-icon-logo\" id=\"mobileLogo\" (click)=\"onHomeClick($event)\" [target]=\"homeTarget\"></a>\r\n\r\n\t<div class=\"menu-container\">\r\n\r\n\t\t<div *ngIf=\"home\" class=\"before-menu\">\r\n\t\t\t<a class=\"question-mark agh-icon-logo\" (click)=\"onHomeClick($event)\" [target]=\"homeTarget\"></a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"menu-area\">\r\n\r\n\t\t\t<ul menu-container class=\"main-menu\">\r\n\r\n\t\t\t\t<ng-content></ng-content>\r\n\r\n\t\t\t</ul>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n  \t`,\r\n\tstyleUrls: [ '../../../assets/less/styles/header.less' ],\r\n\tencapsulation: ViewEncapsulation.None\r\n} )\r\nexport class AlphaGlobalHeader implements AfterViewInit, OnDestroy {\r\n\r\n\tpublic header: AlphaHeader;\r\n\r\n\t@Input( 'home' ) home: Array<string>;\r\n\t@Input( 'homeTarget' ) homeTarget: string = '_self';\r\n\t@Input( 'search' ) search: boolean;\r\n\t@Input( 'search-action' ) searchAction: string;\r\n\t@Input( 'languages' ) languages: Array<any> = [];\r\n\r\n\t/**\r\n\t * Close menu when clicking on self link\r\n\t *\r\n\t * @param event\r\n\t */\r\n\t@HostListener( 'click', [ '$event' ] ) onClick( event ) {\r\n\r\n\t\tconst targ: HTMLElement = event.target,\r\n\t\t\tisRouterLink: boolean = targ.hasAttribute( 'href' );\r\n\r\n\t\tif ( isRouterLink ) {\r\n\t\t\t// close the nav (should close by itself but when clicking on own items no navigation occurs)\r\n\t\t\tthis.header.close();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic constructor(\r\n\t\tprivate elRef: ElementRef,\r\n\t\tprivate router: Router\r\n\t) {\r\n\r\n\t\t/**\r\n\t\t * Listen to navigation events\r\n\t\t * Toolbar items that get moved around lose their ability to have their classes added / removed by angular\r\n\t\t */\r\n\t\tthis.router.events.subscribe( event => {\r\n\r\n\t\t\tif ( !this.header ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( event instanceof NavigationStart ) {\r\n\r\n\t\t\t\t// close any open nav\r\n\t\t\t\tthis.header.close();\r\n\r\n\t\t\t}\r\n\r\n\t\t} )\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * After view and content has been rendered, check the menu widths\r\n\t */\r\n\tpublic ngAfterViewInit(): void {\r\n\r\n\t\t// use our common menu sizing lib\r\n\t\tthis.header = new AlphaHeader( this.elRef.nativeElement, {\r\n\r\n\t\t\tsearch: this.search ? { action: this.searchAction } : false,\r\n\t\t\tlanguages: this.languages,\r\n\t\t\tcloseSubMenusOnClick: true\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * on click of the home link either use the router, or allow to open in new tab\r\n\t * @param event\r\n\t */\r\n\tpublic onHomeClick( event: MouseEvent ) {\r\n\r\n\t\tif ( this.home instanceof Array ) {\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tthis.router.navigate( this.home );\r\n\r\n\t\t} else {\r\n\t\t\tconst link: HTMLElement = event.target as HTMLElement;\r\n\t\t\tlink.setAttribute( 'href', this.home );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Cleanup on destroy\r\n\t */\r\n\tpublic ngOnDestroy(): void {\r\n\r\n\t\tthis.header.destroy();\r\n\t}\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AlphaGlobalHeader } from './alpha-global-header.component';\r\n\r\n@NgModule( {\r\n\tdeclarations: [\r\n\t\tAlphaGlobalHeader\r\n\t],\r\n\texports: [\r\n\t\tAlphaGlobalHeader,\r\n\t],\r\n\timports: [\r\n\t\tCommonModule,\r\n\t]\r\n\r\n} )\r\nexport class AlphaGlobalHeaderModule { }\r\n"]}