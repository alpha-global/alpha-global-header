{"version":3,"file":"alpha-global-header.umd.js.map","sources":["ng://alpha-global-header/src/util/menu-component.ts","ng://alpha-global-header/src/alpha-global-header.component.ts","ng://alpha-global-header/src/module.ts"],"sourcesContent":["\r\n// reference to document element classes\r\nconst htmlClasses = document.documentElement.classList;\r\n\r\n\r\nconst ITEM_SIZE = 84;\r\nconst ITEM_MAX_PADDING = 50;\r\nconst ITEM_MIN_PADDING = 15;\r\nconst ITEM_FONT_SIZE = 18;\r\nconst MENU_RESERVED_WIDTH = 84; // the logo is only required space\r\n\r\n/**\r\n * This class is used in polymer and angular to construct and manage the menu\r\n */\r\nclass AlphaHeader {\r\n\r\n\tpublic toolBar: HTMLElement;\r\n\tpublic menuContainer: HTMLElement;\r\n\tpublic searchArea: HTMLElement;\r\n\r\n\tpublic isCollapsed: boolean;\r\n\tpublic isMinified: boolean;\r\n\tpublic state: string;\r\n\tpublic options: any;\r\n\tpublic defaults: any = {\r\n\t\tminItemSize: 10,\r\n\t\tfontSize: \"10px\",\r\n\t\treservedWidth: 50,\r\n\t\titemPadding: 10, // * x 2,\r\n\t\ttoolBarItemSelector: '[toolbar-item]',\r\n\t\tcloseSubMenusOnClick: false,\r\n\t\tlanguages: []\r\n\r\n\t};\r\n\r\n\tprivate canvasContext: CanvasRenderingContext2D;\r\n\r\n\tprivate _boundResizeFunction: EventListenerOrEventListenerObject;\r\n\tprivate _boundClickFunction: EventListenerOrEventListenerObject;\r\n\tprivate _boundWindowClickFunction: EventListenerOrEventListenerObject;\r\n\r\n\tconstructor(\r\n\t\tpublic element,\r\n\t\toptions\r\n\t) {\r\n\r\n\t\tthis.isCollapsed = false;\r\n\t\tthis.isMinified = false;\r\n\t\tthis.state = '';\r\n\t\tthis.menuContainer = this.element.querySelector( '[menu-container]' );\r\n\r\n\t\tthis.options = merge( options || {}, this.defaults );\r\n\r\n\t\tthis.attachToolbarElements();\r\n\r\n\t\tif ( this.options.languages.length ) {\r\n\t\t\tthis.menuContainer.appendChild( this.createLanguageMenu( 'no-cursor' ) );\r\n\t\t}\r\n\r\n\t\t// create sub menu toggles\r\n\t\tthis.attachSubMenuToggles();\r\n\r\n\t\t// create toolbar menu after sub-menu toggle\r\n\t\tif ( this.options.languages.length ) {\r\n\t\t\tthis.toolBar.insertBefore( this.createLanguageMenu( 'sub-menu-toggle' ), this.toolBar.firstChild );\r\n\t\t}\r\n\r\n\t\tif ( this.options.search ) {\r\n\t\t\tthis.createSearchArea();\r\n\t\t}\r\n\r\n\t\trequestAnimationFrame( () => {\r\n\t\t\tthis.check();\r\n\t\t\tthis.element.classList.add( 'ready' );\r\n\t\t} );\r\n\r\n\t\tthis._boundResizeFunction = this.check.bind( this );\r\n\t\tthis._boundClickFunction = this.onClick.bind( this );\r\n\t\tthis._boundWindowClickFunction = this.onWindowClick.bind( this );\r\n\r\n\t\twindow.addEventListener( 'resize', this._boundResizeFunction );\r\n\r\n\t\tthis.element.addEventListener( 'click', this._boundClickFunction );\r\n\r\n\t\twindow.addEventListener( 'click', this._boundWindowClickFunction );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Listen to clicks on the window to close open nav menus\r\n\t */\r\n\tprivate onWindowClick( event ): void {\r\n\r\n\t\t// if the click came from the menu, dont do anything\r\n\t\tif ( event.isMenuClick ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.closeSubMenus();\r\n\t}\r\n\r\n\t/**\r\n\t * Handle clicks on different elements\r\n\t */\r\n\tprivate onClick( event ): void {\r\n\r\n\t\tevent.isMenuClick = true;\r\n\r\n\r\n\t\tif ( this.options.closeSubMenusOnClick && !document.documentElement.classList.contains( 'nav-open' ) ) {\r\n\t\t\t// close sub-menus if the click came from there\r\n\t\t\tlet menuContainer = event.composedPath().filter( function ( el ) { return el.classList && el.classList.contains( 'sub-menu' ); } )\r\n\t\t\tif ( menuContainer.length ) {\r\n\t\t\t\tconst parentEl: HTMLElement = menuContainer[ 0 ].parentElement;\r\n\t\t\t\tif ( parentEl.classList.contains( 'open' ) ) {\r\n\t\t\t\t\tparentEl.classList.remove( 'open' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.spoofCloseSubMenu( parentEl );\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * Sub menu toggle clicks\r\n\t\t */\r\n\t\tif ( event.target.classList.contains( 'sub-menu-toggle' ) ) {\r\n\r\n\t\t\tlet menutarget;\r\n\t\t\tif ( event.target.classList.contains( 'menu-item-has-children' ) ) {\r\n\r\n\t\t\t\tmenutarget = event.target;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tmenutarget = event.target.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tlet isOpen: boolean = menutarget.classList.contains( 'open' );\r\n\r\n\t\t\tthis.closeSubMenus();\r\n\r\n\t\t\tif ( isOpen ) {\r\n\t\t\t\tmenutarget.classList.remove( 'open' );\r\n\t\t\t} else {\r\n\t\t\t\tmenutarget.classList.add( 'open' );\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t} else if ( event.target.classList.contains( 'search-form-close' ) ) {\r\n\r\n\t\t\tthis.closeSearch();\r\n\r\n\t\t} else if ( event.target.classList.contains( 'search-icon' ) ) {\r\n\r\n\t\t\tthis.openSearch();\r\n\r\n\t\t} else if ( event.target.classList.contains( 'menu-toggle' ) ) {\r\n\r\n\t\t\tthis.open();\r\n\r\n\t\t} else if ( event.target.id === 'closeButton' ) {\r\n\r\n\t\t\tthis.close();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * In angular situations, the page doesn't navigate, so a hovered sub-menu will remain open after a click\r\n\t * This will\r\n\t */\r\n\tprivate spoofCloseSubMenu( element ) {\r\n\t\telement.style.height = ITEM_SIZE + 'px';\r\n\t\telement.style.pointerEvents = 'none';\r\n\t\tsetTimeout( function () {\r\n\r\n\t\t\telement.style.height = '';\r\n\t\t\telement.style.pointerEvents = '';\r\n\r\n\r\n\t\t}, 100 )\r\n\t}\r\n\r\n\t/**\r\n\t * Go through each direct children of the ul menu container, measure the required text for each element plus some padding\r\n\t */\r\n\tprivate getCollapsedMenuWidth( options ): number {\r\n\r\n\t\tvar minWidth = 0,\r\n\t\t\toptions = options || {},\r\n\t\t\tfont = options.font || \"10px Arial\",\r\n\t\t\tletterSpacing = options.letterSpacing || 0,\r\n\t\t\titemPadding = options.itemPadding || 0,\r\n\t\t\tminItemWidth = options.minItemWidth || 0,\r\n\t\t\twordSpacing = options.wordSpacing || 0,\r\n\t\t\texcludeIcons = options.excludeIcons || false,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor ( i; i < this.menuContainer.children.length; i++ ) {\r\n\r\n\t\t\tvar liEl = this.menuContainer.children[ i ];\r\n\r\n\t\t\tvar link = liEl.firstElementChild || liEl,\r\n\t\t\t\ttext = link.textContent,\r\n\t\t\t\tneeded;\r\n\r\n\t\t\tif ( text ) {\r\n\t\t\t\tneeded = this.measureWidth( text, font, { letterSpacing: letterSpacing, wordSpacing: wordSpacing } ) + itemPadding;\r\n\t\t\t} else if ( !excludeIcons ) {\r\n\t\t\t\tneeded = minItemWidth;\r\n\t\t\t} else {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//console.info(link.textContent, needed);\r\n\r\n\t\t\t// ensure min item width\r\n\t\t\tminWidth += needed < minItemWidth ? minItemWidth : needed;\r\n\r\n\t\t};\r\n\r\n\t\treturn minWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Move toolbar elements into the toolbar from the menu\r\n\t *\r\n\t */\r\n\tprivate attachToolbarElements(): void {\r\n\r\n\t\t// create the toolbar container\r\n\t\tthis.toolBar = document.createElement( 'div' );\r\n\t\tthis.toolBar.classList.add( 'menu-toolbar' );\r\n\r\n\t\t// add a search icon\r\n\t\tif ( this.options.search ) {\r\n\t\t\tconst searchIcon: HTMLElement = this.createSearchIcon();\r\n\t\t\tthis.toolBar.appendChild( searchIcon );\r\n\t\t}\r\n\r\n\t\t// add the menu icon\r\n\t\tconst menuToggle: HTMLElement = document.createElement( 'a' );\r\n\t\tmenuToggle.classList.add( 'menu-toggle' );\r\n\t\tmenuToggle.innerHTML = '<i></i>';\r\n\t\tthis.toolBar.appendChild( menuToggle );\r\n\r\n\t\t// add the close button\r\n\t\tconst closeButton: HTMLElement = document.createElement( 'span' );\r\n\t\tcloseButton.id = 'closeButton';\r\n\t\tcloseButton.classList.add( 'agh-icon-close-thin' );\r\n\t\tthis.element.appendChild( closeButton );\r\n\r\n\t\t// append the toolbar\r\n\t\tthis.element.appendChild( this.toolBar );\r\n\r\n\t\t// find dynamic toolbar items from the user markup\r\n\t\tconst items: NodeList = this.menuContainer.querySelectorAll( this.options.toolBarItemSelector );\r\n\r\n\t\tlet i: number = 0,\r\n\t\t\tlen: number = items.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tconst item: Node = items[ i ];\r\n\t\t\tthis.toolBar.insertBefore( item, this.toolBar.firstChild );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Create the language menu\r\n\t */\r\n\tprivate createLanguageMenu( extraClass: string = '' ): HTMLElement {\r\n\r\n\t\tif ( this.options.languages.length === 0 ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst languageElement: HTMLElement = document.createElement( 'div' );\r\n\t\tlanguageElement.classList.add( 'menu-item-has-children' );\r\n\t\tlanguageElement.setAttribute( 'menu-icon', 'w' );\r\n\t\tlanguageElement.setAttribute( 'menu-title', 'Languages' );\r\n\r\n\t\tif ( extraClass ) {\r\n\t\t\tlanguageElement.classList.add( extraClass );\r\n\t\t}\r\n\r\n\t\tlet subMenu: string = '<ul class=\"sub-menu\">',\r\n\t\t\ti: number = 0,\r\n\t\t\tlen: number = this.options.languages.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tconst language = this.options.languages[ i ];\r\n\t\t\tlet href: string = 'javascript:void(0)';\r\n\t\t\tlet attr: string = '';\r\n\t\t\tif ( language.code ) {\r\n\t\t\t\tattr = 'data-lang=\"' + language.code + '\"';\r\n\r\n\t\t\t} else if ( language.href ) {\r\n\t\t\t\thref = language.href;\r\n\t\t\t}\r\n\r\n\t\t\tsubMenu += '<li><a ' + attr + ' href=\"' + href + '\">' + language.label + '</a></li>';\r\n\t\t}\r\n\r\n\t\tsubMenu += '</ul>';\r\n\r\n\t\tlanguageElement.innerHTML = subMenu;\r\n\r\n\t\tlanguageElement.addEventListener( 'click', ( event: MouseEvent ) => {\r\n\r\n\t\t\tlet code = null;\r\n\t\t\tif ( null !== ( code = ( event.target as HTMLElement ).getAttribute( 'data-lang' ) ) ) {\r\n\t\t\t\tlet url: URL = new URL( document.location.href );\r\n\t\t\t\turl.searchParams.delete( 'lang' );\r\n\t\t\t\turl.searchParams.append( 'lang', code );\r\n\t\t\t\tdocument.location.href = url.href;\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn languageElement;\r\n\t}\r\n\r\n\t/**\r\n\t * Create an icon to open the search\r\n\t */\r\n\tprivate createSearchIcon(): HTMLElement {\r\n\t\tconst searchIcon: HTMLElement = document.createElement( 'div' );\r\n\t\tsearchIcon.classList.add( 'search-icon' );\r\n\t\tsearchIcon.setAttribute( 'menu-icon', 'g' );\r\n\t\treturn searchIcon;\r\n\t}\r\n\r\n\t/**\r\n\t * Create the search area\r\n\t */\r\n\tprivate createSearchArea(): void {\r\n\r\n\t\t// create the search form\r\n\t\tthis.searchArea = document.createElement( 'div' );\r\n\t\tthis.searchArea.classList.add( 'menu-search-area' );\r\n\r\n\t\t// form action\r\n\t\tconst searchAction: string = this.options.search.action || \"\";\r\n\r\n\t\t// create a URL from the search action\r\n\t\tconst searchUrl: URL = new URL( searchAction, document.location.origin );\r\n\r\n\t\t// get the form target\r\n\t\tconst formTarget: string = searchUrl.hostname !== document.location.hostname ? '_blank' : '_self';\r\n\r\n\t\t// the form markup\r\n\t\tthis.searchArea.innerHTML =\r\n\t\t\t`<form target=\"${ formTarget }\" class=\"menu-search\" action=\"${ searchAction }\">\r\n\t\t\t\t<div class=\"menu-search-input-wrapper\">\r\n\t\t\t\t\t<input class=\"menu-search-input\" type=\"text\" name=\"s\" value=\"\" placeholder=\"Search\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"search-form-close agh-icon-close-thin\"></div>\r\n\t\t\t</form>`;\r\n\r\n\t\t// create the toggle\r\n\t\tconst searchIcon: HTMLElement = this.createSearchIcon();\r\n\r\n\t\t// attach them\r\n\t\tthis.menuContainer.appendChild( searchIcon );\r\n\t\tthis.menuContainer.parentElement.appendChild( this.searchArea );\r\n\t}\r\n\r\n\t/**\r\n\t * Attach sub menu toggles\r\n\t */\r\n\tprivate attachSubMenuToggles(): void {\r\n\r\n\t\tconst subMenus = this.element.querySelectorAll( '.sub-menu' );\r\n\r\n\t\tlet i: number = 0,\r\n\t\t\tlen: number = subMenus.length;\r\n\r\n\t\tfor ( i; i < len; i++ ) {\r\n\r\n\t\t\tlet subMenu = subMenus[ i ];\r\n\r\n\t\t\tconst toggle: HTMLElement = document.createElement( 'span' );\r\n\t\t\ttoggle.classList.add( 'sub-menu-toggle' );\r\n\r\n\t\t\tsubMenu.parentNode.insertBefore( toggle, subMenu );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Measure the width of text given a font def and custom properties\r\n\t */\r\n\tprivate measureWidth( text, font, overwrites: any = {} ): number {\r\n\r\n\t\tvar letterSpacing = overwrites.letterSpacing || 0;\r\n\t\tvar wordSpacing = overwrites.wordSpacing || 0;\r\n\t\tvar addSpacing = addWordAndLetterSpacing( wordSpacing, letterSpacing );\r\n\r\n\t\tvar ctx = this.getContext2d( font );\r\n\r\n\t\treturn ctx.measureText( text ).width + addSpacing( text );\r\n\t}\r\n\r\n\t/**\r\n\t * Get canvas element to measure text with\r\n\t */\r\n\tprivate getContext2d( font ): CanvasRenderingContext2D {\r\n\r\n\t\tif ( this.canvasContext ) {\r\n\t\t\treturn this.canvasContext;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tvar ctx: any = document.createElement( 'canvas' ).getContext( '2d' );\r\n\t\t\tvar dpr = window.devicePixelRatio || 1;\r\n\t\t\tvar bsr = ctx.webkitBackingStorePixelRatio ||\r\n\t\t\t\tctx.mozBackingStorePixelRatio ||\r\n\t\t\t\tctx.msBackingStorePixelRatio ||\r\n\t\t\t\tctx.oBackingStorePixelRatio ||\r\n\t\t\t\tctx.backingStorePixelRatio || 1;\r\n\t\t\tctx.font = font;\r\n\t\t\tctx.setTransform( dpr / bsr, 0, 0, dpr / bsr, 0, 0 );\r\n\r\n\t\t\tthis.canvasContext = ctx;\r\n\r\n\t\t\treturn ctx;\r\n\t\t} catch ( err ) {\r\n\t\t\tthrow new Error( 'Canvas support required' );\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic open(): void {\r\n\t\tthis.closeSubMenus();\r\n\t\tthis.element.classList.add( 'open' );\r\n\t\thtmlClasses.add( 'nav-open' );\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.element.classList.remove( 'open' );\r\n\t\thtmlClasses.remove( 'nav-open' );\r\n\t}\r\n\r\n\tpublic closeSubMenus(): void {\r\n\t\tlet openElements = this.element.querySelectorAll( '.open' );\r\n\t\tvar i = 0, len = openElements.length;\r\n\t\tfor ( i; i < len; i++ ) {\r\n\t\t\tvar item = openElements[ i ];\r\n\t\t\titem.classList.remove( 'open' );\r\n\t\t}\r\n\t}\r\n\r\n\tpublic openSearch(): void {\r\n\t\tthis.closeSubMenus();\r\n\t\tthis.searchArea.classList.add( 'open' );\r\n\t}\r\n\r\n\tpublic closeSearch(): void {\r\n\r\n\t\tthis.searchArea.classList.remove( 'open' );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Remove listeners\r\n\t */\r\n\tpublic destroy(): void {\r\n\r\n\t\twindow.removeEventListener( 'resize', this._boundResizeFunction );\r\n\r\n\t\tthis.element.removeEventListener( 'click', this._boundClickFunction );\r\n\t}\r\n\r\n\t/**\r\n\t * Resize function\r\n\t */\r\n\tpublic check(): void {\r\n\r\n\t\t// extract the supported values\r\n\t\tvar reservedWidth = MENU_RESERVED_WIDTH,\r\n\t\t\tminItemSize = ITEM_SIZE,\r\n\t\t\ttoolBarIconWidth = ITEM_SIZE,\r\n\t\t\tfontSize = ITEM_FONT_SIZE + \"px\"\r\n\r\n\t\t// available width the menu has to expand to\r\n\t\tvar availWidth = document.body.clientWidth - reservedWidth;\r\n\r\n\r\n\t\t// width needed by the menu\r\n\t\tvar collapsedWidthNeeded = this.getCollapsedMenuWidth( {\r\n\t\t\tfont: \"600 \" + fontSize + \" Century Gothic\",\r\n\t\t\tletterSpacing: \"0.05em\",\r\n\t\t\titemPadding: ITEM_MIN_PADDING * 2,\r\n\t\t\tminItemWidth: minItemSize\r\n\t\t} );\r\n\r\n\t\t// width needed for toolbar icon view\r\n\t\tvar minWidthNeeded = this.toolBar.children.length * toolBarIconWidth;\r\n\r\n\t\t// new state to change into\r\n\t\tvar newState;\r\n\r\n\t\t/*console.info(\r\n\t\t\t\"available width: \" + availWidth + \"\\n\"\r\n\t\t\t+ \"need for collapsed: \" + collapsedWidthNeeded + \"\\n\"\r\n\t\t\t+ \"need for toolbar: \" + minWidthNeeded\r\n\t\t);*/\r\n\r\n\t\t/**\r\n\t\t * Check conditions for collapsing\r\n\t\t */\r\n\r\n\t\tif ( availWidth < minWidthNeeded ) {\r\n\r\n\t\t\tnewState = 'minified';\r\n\r\n\t\t} else if ( availWidth < collapsedWidthNeeded ) {\r\n\r\n\t\t\tnewState = 'collapsed';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewState = '';\r\n\t\t\t// set any extra item padding available\r\n\t\t\tthis.setExtraItemPadding();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.state !== newState ) {\r\n\r\n\t\t\tif ( newState === 'minified' || newState === 'collapsed' ) {\r\n\r\n\t\t\t\thtmlClasses.add( 'nav-collapsed' );\r\n\t\t\t\tthis.element.classList.add( 'collapsed' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( newState === '' ) {\r\n\r\n\t\t\t\thtmlClasses.remove( 'nav-minified' );\r\n\t\t\t\thtmlClasses.remove( 'nav-collapsed' );\r\n\t\t\t\tthis.element.classList.remove( 'minified' );\r\n\t\t\t\tthis.element.classList.remove( 'collapsed' );\r\n\r\n\t\t\t} else if ( newState === 'minified' ) {\r\n\r\n\t\t\t\thtmlClasses.add( 'nav-minified' );\r\n\t\t\t\tthis.element.classList.add( 'minified' );\r\n\r\n\t\t\t} else if ( newState === 'collapsed' && this.state === 'minified' ) {\r\n\r\n\t\t\t\tthis.element.classList.remove( 'minified' );\r\n\t\t\t\thtmlClasses.remove( 'nav-minified' );\r\n\r\n\t\t\t} else if ( this.state === 'collapsed' ) {\r\n\r\n\t\t\t\tthis.element.classList.remove( 'collapsed' );\r\n\t\t\t\thtmlClasses.remove( 'nav-collapsed' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.state = newState;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set extra item padding\r\n\t */\r\n\tprivate setExtraItemPadding(): void {\r\n\r\n\t\t// available width the menu has to expand to\r\n\t\tvar availWidth = document.body.clientWidth - MENU_RESERVED_WIDTH;\r\n\r\n\t\tlet childrenToPad: Array<HTMLElement> = [];\r\n\t\tlet i: number = 0;\r\n\t\tfor ( i; i < this.menuContainer.childElementCount; i++ ) {\r\n\t\t\tlet el: HTMLElement = this.menuContainer.children[ i ] as HTMLElement;\r\n\t\t\tif ( !el.hasAttribute( 'menu-icon' ) && !el.classList.contains( 'menu-icon-width' ) ) {\r\n\t\t\t\tchildrenToPad.push( el );\r\n\t\t\t} else {\r\n\t\t\t\tavailWidth -= ITEM_SIZE;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// min width with no padding, excluding icons\r\n\t\tlet minWidthNeeded: number = this.getCollapsedMenuWidth( {\r\n\t\t\tfont: \"600 \" + ITEM_FONT_SIZE + \"px\" + \" Century Gothic\",\r\n\t\t\tletterSpacing: \"0.05em\",\r\n\t\t\titemPadding: 0,\r\n\t\t\tminItemWidth: 0,\r\n\t\t\texcludeIcons: true\r\n\t\t} );\r\n\r\n\r\n\t\t// space available to distribute to padding\r\n\t\tlet paddingToDistribute: number = availWidth - minWidthNeeded;\r\n\r\n\t\t// item padding\r\n\t\tlet extraItemPadding: number = paddingToDistribute / ( childrenToPad.length * 2 );\r\n\r\n\t\t// ensure max/min\r\n\t\tif ( extraItemPadding > ITEM_MAX_PADDING ) {\r\n\t\t\textraItemPadding = ITEM_MAX_PADDING;\r\n\t\t} else if ( extraItemPadding < ITEM_MIN_PADDING ) {\r\n\t\t\textraItemPadding = ITEM_MIN_PADDING;\r\n\t\t}\r\n\r\n\t\t/*console.info(\r\n\t\t\t\"minWidthNeeded: \" + minWidthNeeded + \"\\n\"\r\n\t\t\t+ \"availWidth: \" + availWidth + \"\\n\"\r\n\t\t\t+ \"will distribute: \" + paddingToDistribute + \"\\n\"\r\n\t\t\t+ \"to \" + childrenToPad.length + \" each: \" + extraItemPadding + \"\\n\"\r\n\t\t);*/\r\n\r\n\t\t/**\r\n\t\t * Set padding on the menu elements\r\n\t\t */\r\n\t\tfor ( i = 0; i < childrenToPad.length; i++ ) {\r\n\t\t\tlet el: HTMLElement = childrenToPad[ i ] as HTMLElement;\r\n\t\t\tif ( !el.firstElementChild ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet link: HTMLElement = el.firstElementChild as HTMLElement;\r\n\t\t\tlink.style.paddingLeft = extraItemPadding + \"px\";\r\n\t\t\tlink.style.paddingRight = extraItemPadding + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n *\r\n * \tHelper functions\r\n *\r\n */\r\n\r\n\r\n/**\r\n *\r\n */\r\nfunction merge( obj, defaultProps ) {\r\n\tfor ( let prop in defaultProps ) {\r\n\t\tif ( !obj.hasOwnProperty( prop ) ) {\r\n\t\t\tobj[ prop ] = defaultProps[ prop ];\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n}\r\n\r\n\r\n/**\r\n * Get property from src\r\n*/\r\nfunction prop( src, attr, defaultValue ) {\r\n\treturn ( src && typeof src[ attr ] !== 'undefined' && src[ attr ] ) || defaultValue;\r\n}\r\n\r\n\r\n/**\r\n * We only support rem/em/pt conversion\r\n */\r\nfunction pxValue( val, options = {} ) {\r\n\tvar baseFontSize = parseInt( prop( options, 'base-font-size', 16 ), 10 );\r\n\r\n\tvar value = parseFloat( val );\r\n\tvar unit = val.replace( value, '' );\r\n\t// eslint-disable-next-line default-case\r\n\tswitch ( unit ) {\r\n\t\tcase 'rem':\r\n\t\tcase 'em':\r\n\t\t\treturn value * baseFontSize;\r\n\t\tcase 'pt':\r\n\t\t\treturn value / ( 96 / 72 );\r\n\t\tcase 'px':\r\n\t\t\treturn value;\r\n\t}\r\n\r\n\tthrow new Error( `The unit ${ unit } is not supported` );\r\n}\r\n\r\n\r\n/**\r\n * Add custom letter and word spacing\r\n */\r\nfunction addWordAndLetterSpacing( ws, ls ) {\r\n\r\n\tlet wordAddon = 0;\r\n\tif ( ws ) {\r\n\t\twordAddon = pxValue( ws );\r\n\t}\r\n\r\n\tlet letterAddon = 0;\r\n\tif ( ls ) {\r\n\t\tletterAddon = pxValue( ls );\r\n\t}\r\n\r\n\treturn function ( text ) {\r\n\t\tvar words = text.trim().replace( /\\s+/gi, ' ' ).split( ' ' ).length - 1;\r\n\t\tvar chars = text.length;\r\n\r\n\t\treturn ( words * wordAddon ) + ( chars * letterAddon );\r\n\t};\r\n}\r\n\r\nexport {\r\n\tAlphaHeader\r\n}\r\n","import {\r\n\tComponent,\r\n\tInput,\r\n\tViewEncapsulation,\r\n\tAfterViewInit,\r\n\tOnDestroy,\r\n\tElementRef,\r\n\tHostListener\r\n\r\n} from '@angular/core';\r\n\r\nimport {\r\n\tRouter,\r\n\tNavigationStart\r\n} from '@angular/router';\r\n\r\nimport { AlphaHeader } from './util/menu-component';\r\n\r\n\r\n@Component( {\r\n\tselector: 'alpha-global-header',\r\n\ttemplate: `\r\n\t<a *ngIf=\"home\" class=\"question-mark agh-icon-logo\" id=\"mobileLogo\" (click)=\"onHomeClick($event)\" [target]=\"homeTarget\"></a>\r\n\r\n\t<div class=\"menu-container\">\r\n\r\n\t\t<div *ngIf=\"home\" class=\"before-menu\">\r\n\t\t\t<a class=\"question-mark agh-icon-logo\" (click)=\"onHomeClick($event)\" [target]=\"homeTarget\"></a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"menu-area\">\r\n\r\n\t\t\t<ul menu-container class=\"main-menu\">\r\n\r\n\t\t\t\t<ng-content></ng-content>\r\n\r\n\t\t\t</ul>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n  \t`,\r\n\tstyleUrls: [ '../../../assets/less/styles/header.less' ],\r\n\tencapsulation: ViewEncapsulation.None\r\n} )\r\nexport class AlphaGlobalHeader implements AfterViewInit, OnDestroy {\r\n\r\n\tpublic header: AlphaHeader;\r\n\r\n\t@Input( 'home' ) home: Array<string>;\r\n\t@Input( 'homeTarget' ) homeTarget: string = '_self';\r\n\t@Input( 'search' ) search: boolean;\r\n\t@Input( 'search-action' ) searchAction: string;\r\n\t@Input( 'languages' ) languages: Array<any> = [];\r\n\r\n\t/**\r\n\t * Close menu when clicking on self link\r\n\t *\r\n\t * @param event\r\n\t */\r\n\t@HostListener( 'click', [ '$event' ] ) onClick( event ) {\r\n\r\n\t\tconst targ: HTMLElement = event.target,\r\n\t\t\tisRouterLink: boolean = targ.hasAttribute( 'href' );\r\n\r\n\t\tif ( isRouterLink ) {\r\n\t\t\t// close the nav (should close by itself but when clicking on own items no navigation occurs)\r\n\t\t\tthis.header.close();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic constructor(\r\n\t\tprivate elRef: ElementRef,\r\n\t\tprivate router: Router\r\n\t) {\r\n\r\n\t\t/**\r\n\t\t * Listen to navigation events\r\n\t\t * Toolbar items that get moved around lose their ability to have their classes added / removed by angular\r\n\t\t */\r\n\t\tthis.router.events.subscribe( event => {\r\n\r\n\t\t\tif ( !this.header ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( event instanceof NavigationStart ) {\r\n\r\n\t\t\t\t// close any open nav\r\n\t\t\t\tthis.header.close();\r\n\r\n\t\t\t}\r\n\r\n\t\t} )\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * After view and content has been rendered, check the menu widths\r\n\t */\r\n\tpublic ngAfterViewInit(): void {\r\n\r\n\t\t// use our common menu sizing lib\r\n\t\tthis.header = new AlphaHeader( this.elRef.nativeElement, {\r\n\r\n\t\t\tsearch: this.search ? { action: this.searchAction } : false,\r\n\t\t\tlanguages: this.languages,\r\n\t\t\tcloseSubMenusOnClick: true\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * on click of the home link either use the router, or allow to open in new tab\r\n\t * @param event\r\n\t */\r\n\tpublic onHomeClick( event: MouseEvent ) {\r\n\r\n\t\tif ( this.home instanceof Array ) {\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tthis.router.navigate( this.home );\r\n\r\n\t\t} else {\r\n\t\t\tconst link: HTMLElement = event.target as HTMLElement;\r\n\t\t\tlink.setAttribute( 'href', this.home );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Cleanup on destroy\r\n\t */\r\n\tpublic ngOnDestroy(): void {\r\n\r\n\t\tthis.header.destroy();\r\n\t}\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AlphaGlobalHeader } from './alpha-global-header.component';\r\n\r\n@NgModule( {\r\n\tdeclarations: [\r\n\t\tAlphaGlobalHeader\r\n\t],\r\n\texports: [\r\n\t\tAlphaGlobalHeader,\r\n\t],\r\n\timports: [\r\n\t\tCommonModule,\r\n\t]\r\n\r\n} )\r\nexport class AlphaGlobalHeaderModule { }\r\n"],"names":["router","NavigationStart","Component","ViewEncapsulation","ElementRef","Router","Input","HostListener","NgModule","CommonModule"],"mappings":";;;;;;;;;;;;QAEM,WAAW,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS;;QAGhD,SAAS,GAAG,EAAE;;QACd,gBAAgB,GAAG,EAAE;;QACrB,gBAAgB,GAAG,EAAE;;QACrB,cAAc,GAAG,EAAE;;QACnB,mBAAmB,GAAG,EAAE;;;;;IAK9B;;;;;;QA2BC,qBACQ,OAAO,EACd,OAAO;YAFR,iBA6CC;YA5CO,YAAO,GAAP,OAAO,CAAA;YAlBR,aAAQ,GAAQ;gBACtB,WAAW,EAAE,EAAE;gBACf,QAAQ,EAAE,MAAM;gBAChB,aAAa,EAAE,EAAE;gBACjB,WAAW,EAAE,EAAE;;gBACf,mBAAmB,EAAE,gBAAgB;gBACrC,oBAAoB,EAAE,KAAK;gBAC3B,SAAS,EAAE,EAAE;aAEb,CAAC;YAaD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAE,kBAAkB,CAAE,CAAC;YAEtE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAE,OAAO,IAAI,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAE,CAAC;YAErD,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAE7B,IAAK,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAG;gBACpC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAE,IAAI,CAAC,kBAAkB,CAAE,WAAW,CAAE,CAAE,CAAC;aACzE;;YAGD,IAAI,CAAC,oBAAoB,EAAE,CAAC;;YAG5B,IAAK,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAG;gBACpC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,IAAI,CAAC,kBAAkB,CAAE,iBAAiB,CAAE,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAE,CAAC;aACnG;YAED,IAAK,IAAI,CAAC,OAAO,CAAC,MAAM,EAAG;gBAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACxB;YAED,qBAAqB,CAAE;gBACtB,KAAI,CAAC,KAAK,EAAE,CAAC;gBACb,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAE,OAAO,CAAE,CAAC;aACtC,CAAE,CAAC;YAEJ,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAE,IAAI,CAAE,CAAC;YACpD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,IAAI,CAAE,CAAC;YACrD,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAE,IAAI,CAAE,CAAC;YAEjE,MAAM,CAAC,gBAAgB,CAAE,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAE,CAAC;YAE/D,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAE,CAAC;YAEnE,MAAM,CAAC,gBAAgB,CAAE,OAAO,EAAE,IAAI,CAAC,yBAAyB,CAAE,CAAC;SAEnE;;;;;;;;;QAKO,mCAAa;;;;;YAArB,UAAuB,KAAK;;gBAG3B,IAAK,KAAK,CAAC,WAAW,EAAG;oBACxB,OAAO;iBACP;gBAED,IAAI,CAAC,aAAa,EAAE,CAAC;aACrB;;;;;;;;;QAKO,6BAAO;;;;;YAAf,UAAiB,KAAK;gBAErB,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;gBAGzB,IAAK,IAAI,CAAC,OAAO,CAAC,oBAAoB,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAE,UAAU,CAAE,EAAG;;;wBAElG,aAAa,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC,MAAM,CAAE,UAAW,EAAE,IAAK,OAAO,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAE,UAAU,CAAE,CAAC,EAAE,CAAE;oBAClI,IAAK,aAAa,CAAC,MAAM,EAAG;;4BACrB,QAAQ,GAAgB,aAAa,CAAE,CAAC,CAAE,CAAC,aAAa;wBAC9D,IAAK,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAE,MAAM,CAAE,EAAG;4BAC5C,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;yBACpC;6BAAM;4BACN,IAAI,CAAC,iBAAiB,CAAE,QAAQ,CAAE,CAAC;yBACnC;wBACD,OAAO;qBACP;iBACD;;;;gBAMD,IAAK,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,iBAAiB,CAAE,EAAG;;wBAEvD,UAAU,SAAA;oBACd,IAAK,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,wBAAwB,CAAE,EAAG;wBAElE,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC;qBAE1B;yBAAM;wBACN,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;qBACrC;;wBAEG,MAAM,GAAY,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAE,MAAM,CAAE;oBAE7D,IAAI,CAAC,aAAa,EAAE,CAAC;oBAErB,IAAK,MAAM,EAAG;wBACb,UAAU,CAAC,SAAS,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;qBACtC;yBAAM;wBACN,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE,MAAM,CAAE,CAAC;qBACnC;iBAID;qBAAM,IAAK,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,mBAAmB,CAAE,EAAG;oBAEpE,IAAI,CAAC,WAAW,EAAE,CAAC;iBAEnB;qBAAM,IAAK,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,aAAa,CAAE,EAAG;oBAE9D,IAAI,CAAC,UAAU,EAAE,CAAC;iBAElB;qBAAM,IAAK,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAE,aAAa,CAAE,EAAG;oBAE9D,IAAI,CAAC,IAAI,EAAE,CAAC;iBAEZ;qBAAM,IAAK,KAAK,CAAC,MAAM,CAAC,EAAE,KAAK,aAAa,EAAG;oBAE/C,IAAI,CAAC,KAAK,EAAE,CAAC;iBAEb;aAGD;;;;;;;;;;;QAMO,uCAAiB;;;;;;YAAzB,UAA2B,OAAO;gBACjC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI,CAAC;gBACxC,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;gBACrC,UAAU,CAAE;oBAEX,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;oBAC1B,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG,EAAE,CAAC;iBAGjC,EAAE,GAAG,CAAE,CAAA;aACR;;;;;;;;;QAKO,2CAAqB;;;;;YAA7B,UAA+B,OAAO;;oBAEjC,QAAQ,GAAG,CAAC;;oBACf,OAAO,GAAG,OAAO,IAAI,EAAE;;oBACvB,IAAI,GAAG,OAAO,CAAC,IAAI,IAAI,YAAY;;oBACnC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,CAAC;;oBAC1C,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,CAAC;;oBACtC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,CAAC;;oBACxC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,CAAC;;oBACtC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,KAAK;;oBAC5C,CAAC,GAAG,CAAC;gBAEN,KAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAG;;wBAElD,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAE,CAAC,CAAE;;wBAEvC,IAAI,GAAG,IAAI,CAAC,iBAAiB,IAAI,IAAI;;wBACxC,IAAI,GAAG,IAAI,CAAC,WAAW;;wBACvB,MAAM;oBAEP,IAAK,IAAI,EAAG;wBACX,MAAM,GAAG,IAAI,CAAC,YAAY,CAAE,IAAI,EAAE,IAAI,EAAE,EAAE,aAAa,EAAE,aAAa,EAAE,WAAW,EAAE,WAAW,EAAE,CAAE,GAAG,WAAW,CAAC;qBACnH;yBAAM,IAAK,CAAC,YAAY,EAAG;wBAC3B,MAAM,GAAG,YAAY,CAAC;qBACtB;yBAAM;wBACN,SAAS;qBACT;;;oBAKD,QAAQ,IAAI,MAAM,GAAG,YAAY,GAAG,YAAY,GAAG,MAAM,CAAC;iBAE1D;gBAED,OAAO,QAAQ,CAAC;aAChB;;;;;;;;;;QAMO,2CAAqB;;;;;YAA7B;;gBAGC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAE,KAAK,CAAE,CAAC;gBAC/C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAE,cAAc,CAAE,CAAC;;gBAG7C,IAAK,IAAI,CAAC,OAAO,CAAC,MAAM,EAAG;;wBACpB,UAAU,GAAgB,IAAI,CAAC,gBAAgB,EAAE;oBACvD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,UAAU,CAAE,CAAC;iBACvC;;;oBAGK,UAAU,GAAgB,QAAQ,CAAC,aAAa,CAAE,GAAG,CAAE;gBAC7D,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE,aAAa,CAAE,CAAC;gBAC1C,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;gBACjC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,UAAU,CAAE,CAAC;;;oBAGjC,WAAW,GAAgB,QAAQ,CAAC,aAAa,CAAE,MAAM,CAAE;gBACjE,WAAW,CAAC,EAAE,GAAG,aAAa,CAAC;gBAC/B,WAAW,CAAC,SAAS,CAAC,GAAG,CAAE,qBAAqB,CAAE,CAAC;gBACnD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,WAAW,CAAE,CAAC;;gBAGxC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAE,IAAI,CAAC,OAAO,CAAE,CAAC;;;oBAGnC,KAAK,GAAa,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAE,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAE;;oBAE3F,CAAC,GAAW,CAAC;;oBAChB,GAAG,GAAW,KAAK,CAAC,MAAM;gBAE3B,KAAM,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAG;;wBACjB,IAAI,GAAS,KAAK,CAAE,CAAC,CAAE;oBAC7B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAE,CAAC;iBAE3D;aAED;;;;;;;;;QAKO,wCAAkB;;;;;YAA1B,UAA4B,UAAuB;gBAAvB,2BAAA;oBAAA,eAAuB;;gBAElD,IAAK,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAG;oBAC1C,OAAO,IAAI,CAAC;iBACZ;;oBAEK,eAAe,GAAgB,QAAQ,CAAC,aAAa,CAAE,KAAK,CAAE;gBACpE,eAAe,CAAC,SAAS,CAAC,GAAG,CAAE,wBAAwB,CAAE,CAAC;gBAC1D,eAAe,CAAC,YAAY,CAAE,WAAW,EAAE,GAAG,CAAE,CAAC;gBACjD,eAAe,CAAC,YAAY,CAAE,YAAY,EAAE,WAAW,CAAE,CAAC;gBAE1D,IAAK,UAAU,EAAG;oBACjB,eAAe,CAAC,SAAS,CAAC,GAAG,CAAE,UAAU,CAAE,CAAC;iBAC5C;;oBAEG,OAAO,GAAW,uBAAuB;;oBAC5C,CAAC,GAAW,CAAC;;oBACb,GAAG,GAAW,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM;gBAE5C,KAAM,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAG;;wBACjB,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAE,CAAC,CAAE;;wBACxC,IAAI,GAAW,oBAAoB;;wBACnC,IAAI,GAAW,EAAE;oBACrB,IAAK,QAAQ,CAAC,IAAI,EAAG;wBACpB,IAAI,GAAG,aAAa,GAAG,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC;qBAE3C;yBAAM,IAAK,QAAQ,CAAC,IAAI,EAAG;wBAC3B,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;qBACrB;oBAED,OAAO,IAAI,SAAS,GAAG,IAAI,GAAG,SAAS,GAAG,IAAI,GAAG,IAAI,GAAG,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC;iBACrF;gBAED,OAAO,IAAI,OAAO,CAAC;gBAEnB,eAAe,CAAC,SAAS,GAAG,OAAO,CAAC;gBAEpC,eAAe,CAAC,gBAAgB,CAAE,OAAO,EAAE,UAAE,KAAiB;;wBAEzD,IAAI,GAAG,IAAI;oBACf,IAAK,IAAI,MAAO,IAAI,GAAG,oBAAE,KAAK,CAAC,MAAM,IAAkB,YAAY,CAAE,WAAW,CAAE,CAAE,EAAG;;4BAClF,GAAG,GAAQ,IAAI,GAAG,CAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAE;wBAChD,GAAG,CAAC,YAAY,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;wBAClC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAE,MAAM,EAAE,IAAI,CAAE,CAAC;wBACxC,QAAQ,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;qBAClC;iBACD,CAAE,CAAC;gBAEJ,OAAO,eAAe,CAAC;aACvB;;;;;;;;QAKO,sCAAgB;;;;YAAxB;;oBACO,UAAU,GAAgB,QAAQ,CAAC,aAAa,CAAE,KAAK,CAAE;gBAC/D,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE,aAAa,CAAE,CAAC;gBAC1C,UAAU,CAAC,YAAY,CAAE,WAAW,EAAE,GAAG,CAAE,CAAC;gBAC5C,OAAO,UAAU,CAAC;aAClB;;;;;;;;QAKO,sCAAgB;;;;YAAxB;;gBAGC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAE,KAAK,CAAE,CAAC;gBAClD,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE,kBAAkB,CAAE,CAAC;;;oBAG9C,YAAY,GAAW,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,IAAI,EAAE;;;oBAGvD,SAAS,GAAQ,IAAI,GAAG,CAAE,YAAY,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAE;;;oBAGlE,UAAU,GAAW,SAAS,CAAC,QAAQ,KAAK,QAAQ,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,GAAG,OAAO;;gBAGjG,IAAI,CAAC,UAAU,CAAC,SAAS;oBACxB,oBAAkB,UAAU,0CAAmC,YAAY,yQAKnE,CAAC;;;oBAGJ,UAAU,GAAgB,IAAI,CAAC,gBAAgB,EAAE;;gBAGvD,IAAI,CAAC,aAAa,CAAC,WAAW,CAAE,UAAU,CAAE,CAAC;gBAC7C,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW,CAAE,IAAI,CAAC,UAAU,CAAE,CAAC;aAChE;;;;;;;;QAKO,0CAAoB;;;;YAA5B;;oBAEO,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,WAAW,CAAE;;oBAEzD,CAAC,GAAW,CAAC;;oBAChB,GAAG,GAAW,QAAQ,CAAC,MAAM;gBAE9B,KAAM,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAG;;wBAEnB,OAAO,GAAG,QAAQ,CAAE,CAAC,CAAE;;wBAErB,MAAM,GAAgB,QAAQ,CAAC,aAAa,CAAE,MAAM,CAAE;oBAC5D,MAAM,CAAC,SAAS,CAAC,GAAG,CAAE,iBAAiB,CAAE,CAAC;oBAE1C,OAAO,CAAC,UAAU,CAAC,YAAY,CAAE,MAAM,EAAE,OAAO,CAAE,CAAC;iBACnD;aAED;;;;;;;;;;;QAMO,kCAAY;;;;;;;YAApB,UAAsB,IAAI,EAAE,IAAI,EAAE,UAAoB;gBAApB,2BAAA;oBAAA,eAAoB;;;oBAEjD,aAAa,GAAG,UAAU,CAAC,aAAa,IAAI,CAAC;;oBAC7C,WAAW,GAAG,UAAU,CAAC,WAAW,IAAI,CAAC;;oBACzC,UAAU,GAAG,uBAAuB,CAAE,WAAW,EAAE,aAAa,CAAE;;oBAElE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAE,IAAI,CAAE;gBAEnC,OAAO,GAAG,CAAC,WAAW,CAAE,IAAI,CAAE,CAAC,KAAK,GAAG,UAAU,CAAE,IAAI,CAAE,CAAC;aAC1D;;;;;;;;;QAKO,kCAAY;;;;;YAApB,UAAsB,IAAI;gBAEzB,IAAK,IAAI,CAAC,aAAa,EAAG;oBACzB,OAAO,IAAI,CAAC,aAAa,CAAC;iBAC1B;gBAED,IAAI;;wBACC,GAAG,GAAQ,QAAQ,CAAC,aAAa,CAAE,QAAQ,CAAE,CAAC,UAAU,CAAE,IAAI,CAAE;;wBAChE,GAAG,GAAG,MAAM,CAAC,gBAAgB,IAAI,CAAC;;wBAClC,GAAG,GAAG,GAAG,CAAC,4BAA4B;wBACzC,GAAG,CAAC,yBAAyB;wBAC7B,GAAG,CAAC,wBAAwB;wBAC5B,GAAG,CAAC,uBAAuB;wBAC3B,GAAG,CAAC,sBAAsB,IAAI,CAAC;oBAChC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;oBAChB,GAAG,CAAC,YAAY,CAAE,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC;oBAErD,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;oBAEzB,OAAO,GAAG,CAAC;iBACX;gBAAC,OAAQ,GAAG,EAAG;oBACf,MAAM,IAAI,KAAK,CAAE,yBAAyB,CAAE,CAAC;iBAC7C;aACD;;;;QAGM,0BAAI;;;YAAX;gBACC,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAE,MAAM,CAAE,CAAC;gBACrC,WAAW,CAAC,GAAG,CAAE,UAAU,CAAE,CAAC;aAC9B;;;;QAEM,2BAAK;;;YAAZ;gBACC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;gBACxC,WAAW,CAAC,MAAM,CAAE,UAAU,CAAE,CAAC;aACjC;;;;QAEM,mCAAa;;;YAApB;;oBACK,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAE,OAAO,CAAE;;oBACvD,CAAC,GAAG,CAAC;;oBAAE,GAAG,GAAG,YAAY,CAAC,MAAM;gBACpC,KAAM,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAG;;wBACnB,IAAI,GAAG,YAAY,CAAE,CAAC,CAAE;oBAC5B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;iBAChC;aACD;;;;QAEM,gCAAU;;;YAAjB;gBACC,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAE,MAAM,CAAE,CAAC;aACxC;;;;QAEM,iCAAW;;;YAAlB;gBAEC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAE,MAAM,CAAE,CAAC;aAE3C;;;;;;;;QAKM,6BAAO;;;;YAAd;gBAEC,MAAM,CAAC,mBAAmB,CAAE,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAE,CAAC;gBAElE,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAE,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAE,CAAC;aACtE;;;;;;;;QAKM,2BAAK;;;;YAAZ;;;oBAGK,aAAa,GAAG,mBAAmB;;oBACtC,WAAW,GAAG,SAAS;;oBACvB,gBAAgB,GAAG,SAAS;;oBAC5B,QAAQ,GAAG,cAAc,GAAG,IAAI;;;oBAG7B,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,aAAa;;;oBAItD,oBAAoB,GAAG,IAAI,CAAC,qBAAqB,CAAE;oBACtD,IAAI,EAAE,MAAM,GAAG,QAAQ,GAAG,iBAAiB;oBAC3C,aAAa,EAAE,QAAQ;oBACvB,WAAW,EAAE,gBAAgB,GAAG,CAAC;oBACjC,YAAY,EAAE,WAAW;iBACzB,CAAE;;;oBAGC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,GAAG,gBAAgB;;;oBAGhE,QAAQ;;;;;;;;;gBAYZ,IAAK,UAAU,GAAG,cAAc,EAAG;oBAElC,QAAQ,GAAG,UAAU,CAAC;iBAEtB;qBAAM,IAAK,UAAU,GAAG,oBAAoB,EAAG;oBAE/C,QAAQ,GAAG,WAAW,CAAC;iBAEvB;qBAAM;oBAEN,QAAQ,GAAG,EAAE,CAAC;;oBAEd,IAAI,CAAC,mBAAmB,EAAE,CAAC;iBAE3B;gBAED,IAAK,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAG;oBAE9B,IAAK,QAAQ,KAAK,UAAU,IAAI,QAAQ,KAAK,WAAW,EAAG;wBAE1D,WAAW,CAAC,GAAG,CAAE,eAAe,CAAE,CAAC;wBACnC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAE,WAAW,CAAE,CAAC;qBAE1C;oBAED,IAAK,QAAQ,KAAK,EAAE,EAAG;wBAEtB,WAAW,CAAC,MAAM,CAAE,cAAc,CAAE,CAAC;wBACrC,WAAW,CAAC,MAAM,CAAE,eAAe,CAAE,CAAC;wBACtC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAE,UAAU,CAAE,CAAC;wBAC5C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAE,WAAW,CAAE,CAAC;qBAE7C;yBAAM,IAAK,QAAQ,KAAK,UAAU,EAAG;wBAErC,WAAW,CAAC,GAAG,CAAE,cAAc,CAAE,CAAC;wBAClC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAE,UAAU,CAAE,CAAC;qBAEzC;yBAAM,IAAK,QAAQ,KAAK,WAAW,IAAI,IAAI,CAAC,KAAK,KAAK,UAAU,EAAG;wBAEnE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAE,UAAU,CAAE,CAAC;wBAC5C,WAAW,CAAC,MAAM,CAAE,cAAc,CAAE,CAAC;qBAErC;yBAAM,IAAK,IAAI,CAAC,KAAK,KAAK,WAAW,EAAG;wBAExC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAE,WAAW,CAAE,CAAC;wBAC7C,WAAW,CAAC,MAAM,CAAE,eAAe,CAAE,CAAC;qBAEtC;oBAGD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;iBAEtB;aACD;;;;;;;;QAKO,yCAAmB;;;;YAA3B;;;oBAGK,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,mBAAmB;;oBAE5D,aAAa,GAAuB,EAAE;;oBACtC,CAAC,GAAW,CAAC;gBACjB,KAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,EAAE,EAAG;;wBACpD,EAAE,sBAAgB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAE,CAAC,CAAE,EAAe;oBACrE,IAAK,CAAC,EAAE,CAAC,YAAY,CAAE,WAAW,CAAE,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAE,iBAAiB,CAAE,EAAG;wBACrF,aAAa,CAAC,IAAI,CAAE,EAAE,CAAE,CAAC;qBACzB;yBAAM;wBACN,UAAU,IAAI,SAAS,CAAC;qBACxB;iBACD;;;oBAGG,cAAc,GAAW,IAAI,CAAC,qBAAqB,CAAE;oBACxD,IAAI,EAAE,MAAM,GAAG,cAAc,GAAG,IAAI,GAAG,iBAAiB;oBACxD,aAAa,EAAE,QAAQ;oBACvB,WAAW,EAAE,CAAC;oBACd,YAAY,EAAE,CAAC;oBACf,YAAY,EAAE,IAAI;iBAClB,CAAE;;;oBAIC,mBAAmB,GAAW,UAAU,GAAG,cAAc;;;oBAGzD,gBAAgB,GAAW,mBAAmB,IAAK,aAAa,CAAC,MAAM,GAAG,CAAC,CAAE;;gBAGjF,IAAK,gBAAgB,GAAG,gBAAgB,EAAG;oBAC1C,gBAAgB,GAAG,gBAAgB,CAAC;iBACpC;qBAAM,IAAK,gBAAgB,GAAG,gBAAgB,EAAG;oBACjD,gBAAgB,GAAG,gBAAgB,CAAC;iBACpC;;;;;;;;;;gBAYD,KAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAG;;wBACxC,EAAE,sBAAgB,aAAa,CAAE,CAAC,CAAE,EAAe;oBACvD,IAAK,CAAC,EAAE,CAAC,iBAAiB,EAAG;wBAC5B,SAAS;qBACT;;wBACG,IAAI,sBAAgB,EAAE,CAAC,iBAAiB,EAAe;oBAC3D,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,gBAAgB,GAAG,IAAI,CAAC;oBACjD,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,gBAAgB,GAAG,IAAI,CAAC;iBAClD;aACD;QAEF,kBAAC;IAAD,CAAC,IAAA;;;;;;;;;;;;IAYD,SAAS,KAAK,CAAE,GAAG,EAAE,YAAY;QAChC,KAAM,IAAI,MAAI,IAAI,YAAY,EAAG;YAChC,IAAK,CAAC,GAAG,CAAC,cAAc,CAAE,MAAI,CAAE,EAAG;gBAClC,GAAG,CAAE,MAAI,CAAE,GAAG,YAAY,CAAE,MAAI,CAAE,CAAC;aACnC;SACD;QACD,OAAO,GAAG,CAAC;IACZ,CAAC;;;;;;;;IAMD,SAAS,IAAI,CAAE,GAAG,EAAE,IAAI,EAAE,YAAY;QACrC,OAAO,CAAE,GAAG,IAAI,OAAO,GAAG,CAAE,IAAI,CAAE,KAAK,WAAW,IAAI,GAAG,CAAE,IAAI,CAAE,KAAM,YAAY,CAAC;IACrF,CAAC;;;;;;;IAMD,SAAS,OAAO,CAAE,GAAG,EAAE,OAAY;QAAZ,wBAAA;YAAA,YAAY;;;YAC9B,YAAY,GAAG,QAAQ,CAAE,IAAI,CAAE,OAAO,EAAE,gBAAgB,EAAE,EAAE,CAAE,EAAE,EAAE,CAAE;;YAEpE,KAAK,GAAG,UAAU,CAAE,GAAG,CAAE;;YACzB,IAAI,GAAG,GAAG,CAAC,OAAO,CAAE,KAAK,EAAE,EAAE,CAAE;;QAEnC,QAAS,IAAI;YACZ,KAAK,KAAK,CAAC;YACX,KAAK,IAAI;gBACR,OAAO,KAAK,GAAG,YAAY,CAAC;YAC7B,KAAK,IAAI;gBACR,OAAO,KAAK,IAAK,EAAE,GAAG,EAAE,CAAE,CAAC;YAC5B,KAAK,IAAI;gBACR,OAAO,KAAK,CAAC;SACd;QAED,MAAM,IAAI,KAAK,CAAE,cAAa,IAAI,sBAAoB,CAAE,CAAC;IAC1D,CAAC;;;;;;;IAMD,SAAS,uBAAuB,CAAE,EAAE,EAAE,EAAE;;YAEnC,SAAS,GAAG,CAAC;QACjB,IAAK,EAAE,EAAG;YACT,SAAS,GAAG,OAAO,CAAE,EAAE,CAAE,CAAC;SAC1B;;YAEG,WAAW,GAAG,CAAC;QACnB,IAAK,EAAE,EAAG;YACT,WAAW,GAAG,OAAO,CAAE,EAAE,CAAE,CAAC;SAC5B;QAED,OAAO,UAAW,IAAI;;gBACjB,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,OAAO,CAAE,OAAO,EAAE,GAAG,CAAE,CAAC,KAAK,CAAE,GAAG,CAAE,CAAC,MAAM,GAAG,CAAC;;gBACnE,KAAK,GAAG,IAAI,CAAC,MAAM;YAEvB,OAAO,CAAE,KAAK,GAAG,SAAS,KAAO,KAAK,GAAG,WAAW,CAAE,CAAC;SACvD,CAAC;IACH,CAAC;;;;;;ACtsBD;QAyEC,2BACS,KAAiB,EACjBA,SAAc;YAFvB,iBAuBC;YAtBQ,UAAK,GAAL,KAAK,CAAY;YACjB,WAAM,GAANA,SAAM,CAAQ;YAxBA,eAAU,GAAW,OAAO,CAAC;YAG9B,cAAS,GAAe,EAAE,CAAC;;;;;YA4BhD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAE,UAAA,KAAK;gBAElC,IAAK,CAAC,KAAI,CAAC,MAAM,EAAG;oBACnB,OAAO;iBACP;gBAED,IAAK,KAAK,YAAYC,sBAAe,EAAG;;oBAGvC,KAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;iBAEpB;aAED,CAAE,CAAA;SACH;;;;;;;;;;;;QAnCsC,mCAAO;;;;;;YAA9C,UAAgD,KAAK;;oBAE9C,IAAI,GAAgB,KAAK,CAAC,MAAM;;oBACrC,YAAY,GAAY,IAAI,CAAC,YAAY,CAAE,MAAM,CAAE;gBAEpD,IAAK,YAAY,EAAG;;oBAEnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;iBACpB;aAED;;;;;;;;QA+BM,2CAAe;;;;YAAtB;;gBAGC,IAAI,CAAC,MAAM,GAAG,IAAI,WAAW,CAAE,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;oBAExD,MAAM,EAAE,IAAI,CAAC,MAAM,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,EAAE,GAAG,KAAK;oBAC3D,SAAS,EAAE,IAAI,CAAC,SAAS;oBACzB,oBAAoB,EAAE,IAAI;iBAE1B,CAAE,CAAC;aAEJ;;;;;;;;;;QAMM,uCAAW;;;;;YAAlB,UAAoB,KAAiB;gBAEpC,IAAK,IAAI,CAAC,IAAI,YAAY,KAAK,EAAG;oBAEjC,KAAK,CAAC,cAAc,EAAE,CAAC;oBAEvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAE,IAAI,CAAC,IAAI,CAAE,CAAC;iBAElC;qBAAM;;wBACA,IAAI,sBAAgB,KAAK,CAAC,MAAM,EAAe;oBACrD,IAAI,CAAC,YAAY,CAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAE,CAAC;iBACvC;aACD;;;;;;;;QAKM,uCAAW;;;;YAAlB;gBAEC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;aACtB;;oBAxHDC,cAAS,SAAE;wBACX,QAAQ,EAAE,qBAAqB;wBAC/B,QAAQ,EAAE,mgBAqBP;wBAEH,aAAa,EAAEC,sBAAiB,CAAC,IAAI;;qBACrC;;;;;wBAvCAC,eAAU;wBAMVC,aAAM;;;;2BAsCLC,UAAK,SAAE,MAAM;iCACbA,UAAK,SAAE,YAAY;6BACnBA,UAAK,SAAE,QAAQ;mCACfA,UAAK,SAAE,eAAe;gCACtBA,UAAK,SAAE,WAAW;8BAOlBC,iBAAY,SAAE,OAAO,EAAE,CAAE,QAAQ,CAAE;;QAgFrC,wBAAC;KA1HD;;;;;;ACnBA;QAIA;SAYwC;;oBAZvCC,aAAQ,SAAE;wBACV,YAAY,EAAE;4BACb,iBAAiB;yBACjB;wBACD,OAAO,EAAE;4BACR,iBAAiB;yBACjB;wBACD,OAAO,EAAE;4BACRC,mBAAY;yBACZ;qBAED;;QACsC,8BAAC;KAZxC;;;;;;;;;;;;;;;;;;;;;;;"}
